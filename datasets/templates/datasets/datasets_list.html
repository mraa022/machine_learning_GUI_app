{% extends "datasets/base_dataset.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'datasets/css/grid.css' %}">		
		<div class="grid-container">
		  {% for dataset in datasets  %}

		 	<div class="grid-item">

		 		<p>{{dataset.title|safe}}</p><br>
		 		

		 		<a href="{% url 'datasets:update' pk=dataset.pk %}" data-toggle="modal" data-target="#modal-update"><i title='Update' class="far fa-edit icon-2x fa-2x"></i></a>
		 		<br>

		 		<a class='view' id='{{dataset.pk}}' title='View' data-toggle='modal' data-target='#dataframe'><i class="fas fa-eye fa-4x"></i></a>

		 		

		 	</div>


		 		
		 	{% endfor %}

		 	{% if  not datasets.count == 10 %}


		 	<a style='' id='create' class='grid-item' title='add a new dataset' class='nav-link' href="{% url 'datasets:create' %}" data-toggle="modal" data-target="#modal"><i class="fas fa-plus-circle fa-5x"></i></a>

		 		{% endif %}
		  
		</div>			
			

<script type="text/javascript">

$('.view').on('click',function(){
			id_ = $(this).attr('id')
			
			$('#dataframe .modal-content').html('<img src="https://theplaycave.com.au/wp-content/uploads/2016/10/loading.gif">')
			$.ajax({
				type:'GET',
				dataType:'html',
				url: 'http://127.0.0.1:8000/datasets/dataset/'+id_+'/',
				success: function(e){
					$('#dataframe .modal-content').html($(e)[9]);
				}

			});

	});
	
</script>

{% endblock content %} 