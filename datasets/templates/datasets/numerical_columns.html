{% load filter %}
<div class='jumbotron' style='display:none' align='center'>
	<button id='can_continue' type="button" class="submit-btn btn btn-primary"><h1 style='color:yellow'>Continue</h1></button>
</div>
<h1>Select The Numerical Columns</h1>
<div class = 'grid-container'>
	
	{% for column in dataframe_columns %}
		{% if  request.COOKIES.label_column  == column %}
			<div class='grid-item label_column' style='background-color:yellow' align='center'>
				<h4>Label Column</h4>
				<h3>{{column}}</h3>
				<h4>{{dataframe|get_data_in_column:column|safe}} </h4>
				
			</div>
		{% else %}
			<div id='{{column}}' class='grid-item' align='center'>
				<h3>{{column}}</h3>
				{% if dataframe|is_numerical:column %}
					<div>
						<p>Contains Only Numbers</p>
					</div>
				{% endif %}
				
				<h4>{{dataframe|get_data_in_column:column|safe}} </h4>
			</div>
		{% endif %}
	{% endfor %}
</div>
<script type="text/javascript">
	var first_time_clicked = true;
	$('.grid-item').not('.label_column').click(function(){
		if (first_time_clicked){
			$("*").animate({
			scrollTop: 0
			}, 200);
		}

		console.log($(this).attr('id'));
		if($(this).find('div').length==1){
			$(this).addClass("higlight_selected");
			$('.jumbotron').css('display','block');
			first_time_clicked = false;
		}
		else{
			alert('this column contains strings');
		}});

		$('.submit-btn').click(function(){
			var numerical_columns = $('.higlight_selected');
			var numerical_column_names = [];
			$('.ajax_part_of_page').html('<div align="center"><img src="https://theplaycave.com.au/wp-content/uploads/2016/10/loading.gif"></div>')
			for(var i = 0; i < numerical_columns.length;i++){
				numerical_column_names.push($(numerical_columns[i]).attr('id'))
			}

			Cookies.set('numerical_columns',numerical_column_names,{path:'/'})
			$.get('{% url "datasets:categorical_columns" %}',function(response){
				$('.ajax_part_of_page').html(response);
		});
		});
		
	
	
</script>